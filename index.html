<!DOCTYPE html>
<body>
<style>
  html, body {
    background: #444;
  }
  #keyboard {
    list-style: none;
    margin: 0 auto;
    padding: 0;
    width: 1320px;
  }
  #keyboard li {
    background: #FFF;
    border: 1px solid red;
    float: left;
    height: 100px;
    width: 20px;
  }
  #keyboard li.white {
    background: #FFF;
  }
  #keyboard li.black {
    background: #000;
  }
</style>
<ul id="keyboard"></ul><script>
(function() {
  var audioCtx = new (AudioContext || webkitAudioContext)();
  var freqs = [16.35, 17.325, 18.355, 19.45, 20.60, 21.83, 23.125, 24.50, 25.96, 27.50, 29.14, 30.87];
  var black = [0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0]

  function Key(isBlack, frequency) {
    var keyEl = document.createElement('li');
    keyEl.className = isBlack ? "black" : "white"
    this.sound = new Sound(frequency);
    keyEl.addEventListener('mousedown', this.sound.play);
    keyEl.addEventListener('mouseup',   this.sound.stop);
    return {
      html: keyEl
    };
  };

  function Sound(frequency) {
    this.pressed = false; // flag to indicate if sound is playing
    this.osc = audioCtx.createOscillator(); // Create oscillator node
    this.osc.frequency.value = frequency ? frequency : null;
    this.osc.type = 'triangle';
    this.osc.start(0);

    this.play = (function() {
      if(!this.pressed) {
        this.pressed = true;
        this.osc.connect(audioCtx.destination);
      }
    }).bind(this);

    this.stop = (function() {
      this.pressed = false;
      this.osc.disconnect();
    }).bind(this);
  };

  var newf = [];
  for(var o = 2; o < 7; o++) { // octaves
    newf = freqs.map(function(f) {
      return f*(Math.pow(2,o));
    });
    for(var f in freqs) {
      var key = new Key(black[f], newf[f]);
      document.getElementById('keyboard').appendChild(key.html);
    }
  }
})();
</script></body>
